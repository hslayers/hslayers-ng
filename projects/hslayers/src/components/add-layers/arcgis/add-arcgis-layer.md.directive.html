<form>
    <div flex layout="row">
        <md-input-container>
            <label>{{'ADDLAYERS.imageFormat' | translate}}</label>
            <md-select ng-model="data.image_format">
                <md-option ng-value="i" ng-repeat="i in data.image_formats">{{ i }}</md-option>
            </md-select>
        </md-input-container>
    </div>

    <div flex layout="row">
        <md-input-container>
            <label>{{'ADDLAYERS.queryFormat' | translate}}</label>
            <md-select ng-model="data.query_format">
                <md-option ng-value="i" ng-repeat="i in data.query_formats">{{ i }}</md-option>
            </md-select>
        </md-input-container>
        <md-input-container ng-show="data.srs.toUpperCase() != data.map_projection">
            <label>{{'ADDLAYERS.srs' | translate}}</label>
            <md-select ng-model="data.srs" ng-change="srsChanged()">
                <md-option ng-value="i" ng-repeat="i in data.srss | limitTo: 50">{{ i }}</md-option>
            </md-select>
        </md-input-container>
    </div>

    <p class="md-warn" ng-show="data.useResampling">{{'ADDLAYERS.mapAndLayerProjection' | translate}}</p>

    <md-checkbox ng-model="data.useTiles" [attr.aria-label]="'ADDLAYERS.useTiles' | translate">
        {{'ADDLAYERS.useTiles' | translate}}
    </md-checkbox>

    <p class="md-warn" ng-show="!data.useTiles">{{'ADDLAYERS.considerUsingTiles' | translate}}</p>

    <md-input-container>
        <label>{{'ADDLAYERS.tileSize' | translate}}</label>
        <input ng-model="data.tileSize" >
    </md-input-container>

    <md-input-container>
        <label>{{'ADDLAYERS.folderName' | translate}}</label>
        <input ng-model="data.path" >
    </md-input-container>

    <md-checkbox ng-model="data.register_metadata" [attr.aria-label]="'ADDLAYERS.registerMetadata' | translate">
        {{'ADDLAYERS.registerMetadata' | translate}}
    </md-checkbox>
    <hr/>

    <md-list>
        <md-list-item>
            <div class="md-list-item-text" layout="column">
                {{data.services.Title}}
                <div layout="row">
                    <md-button class="md-raised md-primary" ng-click="selectAllLayers()">{{'ADDLAYERS.selectAllLayers' | translate}}</md-button>
                    <md-button class="md-raised md-primary" ng-click="addLayers(true)" [attr.aria-label]="'COMMON.add' | translate">
                        <md-icon class="md-danger md-hue-2">add</md-icon>
                    </md-button>
                </div>
            </div>
        </md-list-item>
        <md-list-item ng-repeat="layer in data.services.Layer">
            <div class="md-list-item-text" layout="column">
                <md-checkbox ng-model="layer.checked" aria-label="{{layer.Title}}">
                    {{layer.Title}}
                </md-checkbox>
                <md-list ng-if="hasNestedLayers(layer)">
                    <md-list-item ng-repeat="sub_layer in layer.Layer">
                        <div class="md-list-item-text" layout="column">
                            <md-checkbox ng-model="sub_layer.checked" aria-label="{{sub_layer.Title}}" ng-if="!hasNestedLayers(sub_layer)">
                                {{sub_layer.Title}}
                            </md-checkbox>
                            <md-list ng-if="hasNestedLayers(sub_layer)">
                                <md-list-item ng-repeat="sub_layer2 in sub_layer.Layer">
                                    <div class="md-list-item-text" layout="column">
                                        <md-checkbox ng-model="sub_layer2.checked" aria-label="{{sub_layer2.Title}}">
                                            {{sub_layer2.Title}}
                                        </md-checkbox>
                                    </div>
                                </md-list-item>
                            </md-list>
                        </div>
                    </md-list-item>
                </md-list>
            </div>
        </md-list-item>
    </md-list>
</form>
