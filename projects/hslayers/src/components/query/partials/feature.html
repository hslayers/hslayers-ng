<div class="container-fluid">
    <div class="row">
        <div class="col-12 m-2"><strong>{{feature.name}} <span *ngIf="feature.layer">in layer</span>
                {{feature.layer}}</strong></div>
    </div>
    <hs-query-attribute-row *ngFor="let attribute of feature.attributes" [template]="feature.hstemplate"
        [feature]="feature" [attribute]="attribute" [readonly]="false">
    </hs-query-attribute-row>
    <hs-query-attribute-row *ngFor="let stat of feature.stats" [feature]="feature" [attribute]="stat" [readonly]="true">
    </hs-query-attribute-row>
    <div class="row">
        <div class="input-group m-1" [hidden]="!newAttribVisible">
            <div class="input-group m-1">
                <input class="form-control" [placeholder]="'QUERY.feature.attributeName' | translate" [(ngModel)]="attributeName" [ngModelOptions]="{standalone: true}">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="input-group m-1" [hidden]="!(attributeName && newAttribVisible)">
            <div class="input-group m-1">
                <input class="form-control" [placeholder]="'QUERY.feature.attributeValue' | translate" [(ngModel)]="attributeValue" [ngModelOptions]="{standalone: true}">
            </div>
        </div>
    </div>
    <div class="row" [hidden]="!(attributeName && attributeValue && newAttribVisible)">
        <div class="col-6 mb-2 text-left">
            <div class="btn-group">
                <button class="btn btn-primary btn-sm" (click)="saveNewAttribute(attributeName,attributeValue)"><i
                        class="icon-save-floppy"></i></button>
            </div>
        </div>
    </div>
    
    <div [hidden]="!editType" class="row p-2 ">
        <div class="d-flex w-100 input-group input-group-sm align-items-baseline">
            <div class="input-group-prepend">
                <label for="selectedLayer" class="px-2">{{HsFeatureCommonService.translateString('QUERY.feature',editType+'Feature')}} into:</label>
            </div>
            <select class="form-control" [(ngModel)]="selectedLayer" name="selectedLayer">
                <option *ngFor="let layer of availableLayers" [ngValue]="layer">
                    {{HsLayerUtilsService.translateTitle(getTitle(layer))}}</option>
            </select>
            <div class="input-group-append">
                <button class="btn btn-primary btn-sm" (click)="moveOrCopyFeature()" [disabled]="!selectedLayer"><i class="icon-save-floppy"></i></button>
              </div>
        </div>
    </div>
</div>
<div class="justify-content-end" style="padding-left: 10px">
    <div class="mx-1 mb-2 text-right">
        <div class="btn-group">
            <button class="btn btn-secondary btn-sm" (click)="newAttribVisible = !newAttribVisible"><i
                    class="icon-calcplus"></i></button>
            <button class="btn btn-primary btn-sm" (click)="zoomToFeature()"><i class="icon-search"></i></button>
            <button class="btn btn-info btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aris-haspopup="true" (click)="toggleEditMenu()"><i
                class="icon-settingsthree-gears"></i></button>
            <div class="dropdown-menu dropdown-menu-right" [ngClass]="{'show': editMenuVisible}">
                <a class="dropdown-item" (click)="editTypeSelected('copy')">{{'QUERY.feature.copyFeature' | translate}}</a>
                <a class="dropdown-item" (click)="editTypeSelected('move')">{{'QUERY.feature.moveFeature' | translate}}</a>
            </div>
            <button class="btn btn-success btn-sm dropdown-toggle" type="button" data-toggle="dropdown"
                aris-haspopup="true" (click)="toggleExportMenu()" [title]="'QUERY.downloadAs' | translate"
                ><i
                    class="icon-download"></i></button>
            <div class="dropdown-menu dropdown-menu-right" [ngClass]="{'show': exportMenuVisible}">
                <a class="dropdown-item" download="{{format.name}}_file.{{format.ext}}" 
                [hsDownload]="format.serializedData" 
                [mimeType]="format.mimeType"
                [href]="format.downloadData"
                (downloadPrepared)="format.downloadData = $event"
                *ngFor="let format of exportFormats"
                >{{format.name}}</a>
            </div>
            <button class="btn btn-danger btn-sm" (click)="removeFeature()" *ngIf="isFeatureRemovable()"><i
                    class="icon-trash"></i></button>
        </div>
    </div>
</div>
