<div>
  <div class="d-flex flex-row justify-content-end">
    <div class="p-1 flex-grow-1">
      {{'STYLER.filtersAndScales' | translate }}:
    </div>
    <div class="p-1">
      <div class="btn-group" role="group" aria-label="Filters and scales">
        <button [title]="'STYLER.toggleFilters' | translate  " class="btn btn-sm"
          [ngClass]="{'btn-outline-primary': rule.filter && rule.filter.length > 0, 'btn-outline-secondary': rule.filter === undefined || rule.filter.length === 0}"
          (click)="filtersVisible = !filtersVisible">
          <span class="fa-solid fa-filter"></span>
        </button>
        <button [title]="'STYLER.toggleScaleDenominators' | translate  " class="btn btn-sm"
          [ngClass]="{'btn-outline-primary': rule.scaleDenominator && (rule.scaleDenominator.min !== undefined || rule.scaleDenominator.max !== undefined), 'btn-outline-secondary': rule.scaleDenominator === undefined || (rule.scaleDenominator.min === undefined && rule.scaleDenominator.max === undefined)}"
          (click)="scalesVisible = !scalesVisible">
          <span class="fa-solid fa-up-right-and-down-left-from-center"></span>
        </button>
      </div>
    </div>
  </div>
  @if (filtersVisible) {
  <hs-filters (changes)="emitChange()" [selectedLayer]="layerSelectorService.currentLayer" [rule]="rule"></hs-filters>
  }
  @if (scalesVisible) {
  <hs-scale-denominator (changes)="emitChange()" [rule]="rule"></hs-scale-denominator>
  }
  <div class="d-flex flex-row justify-content-end">
    <div class="p-1 flex-grow-1">{{'STYLER.symbolizers' | translate }}:</div>
    <div class="p-1">
      <div #addSymMenu="ngbDropdown" ngbDropdown class="d-inline-block" placement="bottom-right">
        <button class="btn btn-outline-primary btn-sm" [title]="'STYLER.addSymbolizer' | translate  "
          id="dropdownAddSymbolizer" ngbDropdownToggle>
          <span class="fa-solid fa-plus"></span>
        </button>
        <div ngbDropdownMenu aria-labelledby="dropdownAddSymbolizer">
          <button ngbDropdownItem (click)="addSymbolizer('Mark')">
            {{'STYLER.mark' | translate }}
          </button>
          <button ngbDropdownItem (click)="addSymbolizer('Icon')">
            {{'STYLER.icon' | translate }}
          </button>
          <button ngbDropdownItem (click)="addSymbolizer('Text')">
            {{'STYLER.text' | translate }}
          </button>
          <button ngbDropdownItem (click)="addSymbolizer('Line')">
            {{'STYLER.line' | translate }}
          </button>
          <button ngbDropdownItem (click)="addSymbolizer('Fill')">
            {{'STYLER.fill' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
  @if (rule.symbolizers.length > 0) {
  <ul class="list-group hs-styler-content-list align-items-end" cdkDropList (cdkDropListDropped)="drop($event)"
    [cdkDropListData]="rule.symbolizers">
    @for (symbolizer of rule.symbolizers; track symbolizer) {
    <hs-symbolizer-list-item style="width: 98%" cdkDrag [rule]="rule" [symbolizer]="symbolizer"
      (changes)="emitChange()">
    </hs-symbolizer-list-item>
    }
  </ul>
  }
</div>
