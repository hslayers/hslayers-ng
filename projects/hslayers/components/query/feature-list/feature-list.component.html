<ng-container>
  @if (hsQueryBaseService.features.length > 0) {
    <div class="navbar navbar-light bg-light px-1">
      <div class="d-flex align-items-baseline w-100">
        <div class="d-flex align-items-baseline" style="flex: 1;">
          <p class="m-0" [ngStyle]="{'flex' : hsQueryBaseService.features.length > 1 ? '' : '1'}">
            {{'QUERY.featuresSelected' | translate }}{{hsQueryBaseService.features.length}}
          </p>
          <button type="button" class="btn dropdown-toggle border-0 ms-2"
            [title]="'HISTORY.toggleDropdown' | translate  "
            (click)="selectedFeaturesVisible = !selectedFeaturesVisible">
          </button>
        </div>
        @if (olFeatureArray().length > 0) {
          <div class="btn-group">
            <div class="btn-group" ngbDropdown placement="bottom" display="dynamic">
              <button ngbDropdownToggle class="btn btn-secondary btn-sm" type="button"
                (click)="toggleEditMenu()"><i class="fa-solid fa-gears"></i></button>
              <div ngbDropdownMenu [ngClass]="{'show': editMenuVisible}">
                <a class="dropdown-item" (click)="editTypeSelected('copy')">{{'QUERY.feature.copyFeatures' |
                  translate }}</a>
                <a class="dropdown-item" (click)="editTypeSelected('move')">{{'QUERY.feature.moveFeatures' |
                  translate }}</a>
              </div>
            </div>
            <div class="btn-group" ngbDropdown placement="bottom" display="dynamic">
              <button ngbDropdownToggle class="btn btn-secondary btn-sm rounded-0" type="button"
                [title]="'QUERY.downloadAs' | translate  " (click)="toggleExportMenu()"><i
                class="fa-solid fa-download"></i></button>
              <div ngbDropdownMenu [ngClass]="{'show': exportMenuVisible}">
                @for (format of exportFormats; track format) {
                  <a class="dropdown-item"
                    [download]="format.name + '_file.' + format.ext" [hsDownload]="format.serializedData"
                    [mimeType]="format.mimeType" [href]="format.downloadData"
                    (downloadPrepared)="format.downloadData = $event">
                  {{format.name}}</a>
                }
              </div>
            </div>
            <button type="button" class="btn-danger btn btn-sm border-0"
              [title]="'QUERY.deleteAllSelected' | translate  " (click)="removeAllSelectedFeatures()">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        }
      </div>
      @if (editType) {
        <div class="d-flex p-2 w-100">
          <div class="d-flex w-100 input-group input-group-sm align-items-baseline">
            <label for="selectedLayer" class="px-2">{{translateString('QUERY.feature',editType+'Features')}}
            {{'COMMON.into' | translate }}:</label>
            <select class="form-control text-truncate" [(ngModel)]="selectedLayer" name="selectedLayer"
              [title]="'ADDLAYERS.Vector.chooseLayer' | translate  ">
              <option [ngValue]="null" [disabled]="true" selected hidden> {{'ADDLAYERS.Vector.chooseLayer' |
              translate }}</option>
              @for (layer of hsFeatureCommonService.availableLayer$ | async; track layer) {
                <option [ngValue]="layer">
                {{'LAYERS.' + getTitle(layer) | translate : {fallbackValue: getTitle(layer)} }}</option>
              }
            </select>
            <button class="btn btn-primary btn-sm" (click)="moveOrCopyFeature()" [disabled]="!selectedLayer"><i
            class="fa-solid fa-floppy-disk"></i></button>
          </div>
        </div>
      }
    </div>
  }
  @if (selectedFeaturesVisible) {
    <div>
      @for (item of hsQueryBaseService.features | slice:0:50; track trackById($index, item)) {
        <hs-query-feature
          [feature]="item">
        </hs-query-feature>
      }
    </div>
  }
</ng-container>
