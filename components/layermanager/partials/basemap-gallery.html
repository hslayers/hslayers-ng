<div class="basemapGallery" ng-style="galleryStyle()">
    <div class="btn-group btn-group-sm" role="group" aria-label="Button group with nested dropdown">
        <button type="button" ng-if="fitsInContainer()" class="button-primary btn-sm  basemap-tile "
            ng-repeat="layer in LayMan.data.baselayers | orderBy: 'title'"
            ng-click="LayMan.changeBaseLayerVisibility($event, layer)"
            ng-class="{'active': layer.active}">{{::layer.title}}</button>

        <div class="btn-group btn-group-sm" role="group" ng-if="!fitsInContainer()">
            <button type="button" ng-click="baseLayersExpanded=!baseLayersExpanded"
                class="btn rounded galleryButton pt-0 pb-0" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="{{baseLayersExpanded}}">
                <i class="glyphicon icon-map x-large p-0"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-right p-0" ng-class="{'show': baseLayersExpanded}">
                <div ng-click="changeBaseLayerVisibility()">
                    <div ng-style="{'height':'4em', 'width': '100%'}" ng-class="{'active': !data.baselayersVisible}"
                        alt=""></div>
                    <a class="dropdown-item" href="#" ng-class="{'active': !data.baselayersVisible}">Without basemap</a>
                </div>
                <div ng-repeat="layer in LayMan.data.baselayers | orderBy: 'title'"
                    ng-click="LayMan.changeBaseLayerVisibility($event, layer)">
                    <img ng-class="{'active': layer.active}" ng-src="{{layer.thumbnail}}" alt="Basemap thumbnail"
                        ng-style="{'height':'4em', 'width': '100%'}">
                    <a class="dropdown-item" href="#" ng-class="{'active': layer.active}">{{layer.title}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
</div>